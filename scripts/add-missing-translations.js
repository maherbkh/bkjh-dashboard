import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Missing translations with their English and German values
const missingTranslations = {
    en: {
        'academy.capacity': 'Capacity',
        'academy.createdBy': 'Created By',
        'academy.duration': 'Duration',
        'academy.events.filters.select_date': 'Select Date',
        'academy.information': 'Event Information',
        'academy.location': 'Location',
        'academy.room': 'Room',
        'academy.schedules': 'Schedules',
        'academy.speakers': 'Speakers',
        'action.activate': 'Activate',
        'action.deactivate': 'Deactivate',
        'action.save_changes': 'Save Changes',
        'admin.loading': 'Loading admins...',
        'admin.no_admins_available': 'No admins available',
        'admin.select': 'Select Admin',
        'assignSelf': 'Assign to Me',
        'attendee.no_employment_details': 'No employment details available',
        'attendee.non_employee': 'Non-Employee',
        'attendee.password_reset_email_not_found': 'Email address not found',
        'attendee.password_reset_error': 'An error occurred while sending the password reset email',
        'attendee.password_reset_invalid_email': 'Invalid email address',
        'attendee.password_reset_rate_limit': 'Too many requests. Please try again later',
        'attendee.password_reset_sent': 'Password reset email sent successfully',
        'attendee.send_password_reset': 'Send Password Reset Email',
        'auth.invalid_token': 'Invalid or expired token',
        'auth.logout_all_success': 'All sessions have been logged out',
        'auth.password_change_failed': 'Failed to change password',
        'auth.password_change_success': 'Password changed successfully',
        'auth.password_changed': 'Password Changed',
        'auth.password_placeholder': 'Enter your password',
        'auth.passwords_do_not_match': 'Passwords do not match',
        'auth.please_fill_all_fields': 'Please fill in all fields',
        'auth.profile_update_failed': 'Failed to update profile',
        'auth.validation.incorrect_credentials': 'Incorrect email or password',
        'category.add': 'Add Category',
        'category.edit': 'Edit Category',
        'category.select': 'Select Category',
        'close': 'Close',
        'closeDialog': 'Close Dialog',
        'common.actions': 'Actions',
        'common.cancel': 'Cancel',
        'common.confirm': 'Confirm',
        'common.email': 'Email',
        'common.first_name': 'First Name',
        'common.last_login': 'Last Login',
        'common.last_name': 'Last Name',
        'common.loading': 'Loading...',
        'common.never': 'Never',
        'common.no': 'No',
        'common.not_specified': 'Not specified',
        'common.of': 'of',
        'common.position': 'Position',
        'common.short_description': 'Short Description',
        'common.show': 'Show',
        'common.yes': 'Yes',
        'company.add': 'Add Company',
        'company.edit': 'Edit Company',
        'date.singular': 'Date',
        'edit': 'Edit',
        'event.add': 'Add Event',
        'event.date': 'Event Date',
        'event.edit': 'Edit Event',
        'event.end_time': 'End Time',
        'event.location': 'Event Location',
        'event.max_capacity': 'Maximum Capacity',
        'event.room': 'Room',
        'event.schedule': 'Schedule',
        'event.schedules': 'Schedules',
        'event.short_description': 'Short Description',
        'event.start_time': 'Start Time',
        'event.title': 'Event Title',
        'event.type': 'Event Type',
        'file.validation.invalid_type': 'Invalid file type',
        'file.validation.max_files': 'Maximum number of files exceeded',
        'file.validation.max_size': 'File size exceeds maximum allowed',
        'file_uploader.click_to_upload': 'Click to upload',
        'file_uploader.or_drag_drop': 'or drag and drop',
        'file_uploader.upload_failed': 'Upload failed',
        'file_uploader.uploading': 'Uploading...',
        'form.description': 'Description',
        'global.close': 'Close',
        'global.common.confirm_bulk_delete_title': 'Confirm Bulk Delete',
        'global.common.confirm_delete_title': 'Confirm Delete',
        'global.common.delete_confirmation': 'Are you sure you want to delete this item?',
        'global.common.more': 'More',
        'global.common.no_companies': 'No companies',
        'global.confirm': 'Confirm',
        'global.dashboard': 'Dashboard',
        'global.deleted_items': 'Deleted Items',
        'global.error': 'Error',
        'global.goodbye': 'Goodbye',
        'global.less': 'Less',
        'global.loading': 'Loading',
        'global.management': 'Management',
        'global.master_data': 'Master Data',
        'global.message': 'Message',
        'global.messages.error': 'Error',
        'global.messages.something_went_wrong': 'Something went wrong. Please try again.',
        'global.more': 'More',
        'global.name': 'Name',
        'global.next': 'Next',
        'global.no_records_found': 'No records found',
        'global.no_search_results': 'No search results found for',
        'global.overview': 'Overview',
        'global.previous': 'Previous',
        'global.sidebar.delete_project': 'Delete Project',
        'global.sidebar.my_account': 'My Account',
        'global.sidebar.my_tasks': 'My Tasks',
        'global.sidebar.projects': 'Projects',
        'global.sidebar.settings': 'Settings',
        'global.slug': 'Slug',
        'global.welcome': 'Welcome back',
        'group.add': 'Add Group',
        'group.edit': 'Edit Group',
        'group.select': 'Select Group',
        'it_support.plural': 'IT Support',
        'it_support.singular': 'IT Support',
        'language.description': 'Choose your preferred language for the application',
        'language.plural': 'Languages',
        'language.singular': 'Language',
        'location.plural': 'Locations',
        'location.singular': 'Location',
        'media.access_academy': 'Academy',
        'media.access_level': 'Access Level',
        'media.access_public': 'Public',
        'media.access_self': 'Self Only',
        'media.access_support': 'Support Team',
        'media.add_metadata': 'Add Metadata',
        'media.add_metadata_description': 'Add metadata information for your media file',
        'media.alt_text': 'Alt Text',
        'media.alt_text_placeholder': 'Enter alternative text for accessibility',
        'media.allowed_types': 'Allowed types',
        'media.current': 'Current',
        'media.description': 'Description',
        'media.description_placeholder': 'Enter a description for this media file',
        'media.drag_drop_or_click': 'Drag and drop files here, or click to select',
        'media.edit_metadata': 'Edit Metadata',
        'media.edit_metadata_description': 'Edit metadata information for your media file',
        'media.gallery_description': 'Select files from your media library',
        'media.gallery_title': 'Media Gallery',
        'media.load_error': 'Failed to load media',
        'media.max_files': 'Max files',
        'media.max_size': 'Max size',
        'media.no_files_found': 'No files found',
        'media.open_gallery': 'Open Gallery',
        'media.remove': 'Remove',
        'media.replace': 'Replace',
        'media.search_placeholder': 'Search media files...',
        'media.select_files': 'Select Files',
        'media.selected': 'selected',
        'media.selected_files': 'Selected Files',
        'media.title': 'Title',
        'media.title_placeholder': 'Enter a title for this media file',
        'media.upload_error': 'Upload failed',
        'media.upload_prompt': 'Click to upload or drag and drop',
        'media.uploading': 'Uploading...',
        'media.validation.globally_denied': 'File type \'{type}\' is not allowed for security reasons',
        'media.validation.size_exceeded': 'File size ({size}MB) exceeds maximum allowed size ({max}MB)',
        'media.validation.svg_superadmin_only': 'SVG files can only be uploaded by super administrators',
        'media.validation.too_many_files': 'Too many files ({count}). Maximum allowed: {max}',
        'media.validation.type_denied': 'File type \'{type}\' is not allowed for security reasons',
        'media.validation.type_not_allowed': 'File type \'{type}\' is not allowed. Allowed types: {allowed}',
        'note.placeholder': 'Enter note...',
        'note.singular': 'Note',
        'occupation.add': 'Add Occupation',
        'occupation.description': 'Manage occupations and job roles',
        'occupation.edit': 'Edit Occupation',
        'occupation.name': 'Occupation Name',
        'occupation.name_placeholder': 'Enter occupation name',
        'occupation.plural': 'Occupations',
        'occupation.select': 'Select Occupation',
        'occupation.singular': 'Occupation',
        'partner.location': 'Partner Location',
        'partner.plural': 'Partners',
        'partner.register': 'Partner Register',
        'partner.singular': 'Partner',
        'permission.plural': 'Permissions',
        'permission.singular': 'Permission',
        'position.placeholder': 'Enter position',
        'position.plural': 'Positions',
        'position.singular': 'Position',
        'postal_code.placeholder': 'Enter postal code',
        'postal_code.singular': 'Postal Code',
        'preference.description': 'Manage your application preferences and settings',
        'preference.plural': 'Preferences',
        'preference.singular': 'Preference',
        'profile.description': 'Manage your personal information and account settings',
        'profile.singular': 'Profile',
        'profile.update_failed': 'Failed to update profile',
        'profile.update_success': 'Profile updated successfully',
        'requester.cell': 'Requester Cell',
        'requester.email': 'Requester Email',
        'requester.information': 'Requester Information',
        'requester.name': 'Requester Name',
        'requester.phone': 'Requester Phone',
        'requester.plural': 'Requesters',
        'requester.singular': 'Requester',
        'role.no_permission': 'No Permission',
        'role.plural': 'Roles',
        'role.singular': 'Role',
        'role.singular_placeholder': 'Select a role',
        'setting.plural': 'Settings',
        'setting.singular': 'Setting',
        'speaker.add_description': 'Add a new speaker to the academy system',
        'speaker.description': 'Manage speakers for academy events and workshops',
        'speaker.edit_description': 'Edit speaker information and qualifications',
        'speaker.name': 'Speaker Name',
        'speaker.name_placeholder': 'Enter speaker name',
        'speaker.plural': 'Speakers',
        'speaker.qualification': 'Qualification',
        'speaker.qualification_help': 'Optional: Describe the speaker\'s expertise and credentials',
        'speaker.qualification_placeholder': 'Enter speaker qualification (e.g., PhD in Computer Science)',
        'speaker.singular': 'Speaker',
        'street.placeholder': 'Enter street name',
        'street.singular': 'Street',
        'street_number.placeholder': 'Enter street number',
        'street_number.singular': 'Street Number',
        'task.plural': 'Tasks',
        'task.singular': 'Task',
        'theme.description': 'Choose your preferred color theme for the application',
        'theme.plural': 'Themes',
        'theme.singular': 'Theme',
        'ticket.details': 'Ticket Details',
        'ticket.plural': 'Tickets',
        'ticket.singular': 'Ticket',
        'type.plural': 'Types',
        'type.singular': 'Type',
        'user.account': 'Account',
        'user.add_description': 'Add a new user to the system',
        'user.edit_description': 'Edit user information and permissions',
        'user.first_name': 'First Name',
        'user.first_name_placeholder': 'Enter first name',
        'user.is_super_admin': 'Super Admin',
        'user.last_name': 'Last Name',
        'user.last_name_placeholder': 'Enter last name',
        'user.not_super_admin': 'Regular User',
        'user.password_placeholder': 'Enter password',
        'user.plural': 'Users',
        'user.singular': 'User',
        'user.super_admin': 'Super Admin',
        'user.username': 'Username',
        'user.username_placeholder': 'Enter username',
        'validation.code_format': 'must contain only uppercase letters, numbers, and underscores',
        'validation.employee_fields_required': 'Group and Occupation are required for employees',
        'validation.exact_length': 'must be exactly {len} characters',
        'validation.integer': 'must be an integer',
        'validation.invalid': 'is invalid',
        'validation.max_length': 'must be at most {max} characters',
        'validation.min_length': 'must be at least {min} characters',
        'validation.min_value': 'must be at least {min}',
        'validation.password_strength': 'must contain at least one lowercase letter, one uppercase letter, and one number',
        'validation.positive': 'must be a positive number',
        'validation.required': 'is required',
        'validation.slug_format': 'must contain only lowercase letters, numbers, and hyphens',
        'validation.uuid': 'must be a valid UUID',
    },
    de: {
        'academy.capacity': 'Kapazität',
        'academy.createdBy': 'Erstellt von',
        'academy.duration': 'Dauer',
        'academy.events.filters.select_date': 'Datum auswählen',
        'academy.information': 'Veranstaltungsinformationen',
        'academy.location': 'Standort',
        'academy.room': 'Raum',
        'academy.schedules': 'Zeitpläne',
        'academy.speakers': 'Referenten',
        'action.activate': 'Aktivieren',
        'action.deactivate': 'Deaktivieren',
        'action.save_changes': 'Änderungen speichern',
        'admin.loading': 'Administratoren werden geladen...',
        'admin.no_admins_available': 'Keine Administratoren verfügbar',
        'admin.select': 'Administrator auswählen',
        'assignSelf': 'Mir zuweisen',
        'attendee.no_employment_details': 'Keine Beschäftigungsdetails verfügbar',
        'attendee.non_employee': 'Nicht-Mitarbeiter',
        'attendee.password_reset_email_not_found': 'E-Mail-Adresse nicht gefunden',
        'attendee.password_reset_error': 'Ein Fehler ist beim Senden der Passwort-Reset-E-Mail aufgetreten',
        'attendee.password_reset_invalid_email': 'Ungültige E-Mail-Adresse',
        'attendee.password_reset_rate_limit': 'Zu viele Anfragen. Bitte versuchen Sie es später erneut',
        'attendee.password_reset_sent': 'Passwort-Reset-E-Mail erfolgreich gesendet',
        'attendee.send_password_reset': 'Passwort-Reset-E-Mail senden',
        'auth.invalid_token': 'Ungültiger oder abgelaufener Token',
        'auth.logout_all_success': 'Alle Sitzungen wurden abgemeldet',
        'auth.password_change_failed': 'Passwortänderung fehlgeschlagen',
        'auth.password_change_success': 'Passwort erfolgreich geändert',
        'auth.password_changed': 'Passwort geändert',
        'auth.password_placeholder': 'Geben Sie Ihr Passwort ein',
        'auth.passwords_do_not_match': 'Passwörter stimmen nicht überein',
        'auth.please_fill_all_fields': 'Bitte füllen Sie alle Felder aus',
        'auth.profile_update_failed': 'Profil-Aktualisierung fehlgeschlagen',
        'auth.validation.incorrect_credentials': 'Falsche E-Mail oder Passwort',
        'category.add': 'Kategorie hinzufügen',
        'category.edit': 'Kategorie bearbeiten',
        'category.select': 'Kategorie auswählen',
        'close': 'Schließen',
        'closeDialog': 'Dialog schließen',
        'common.actions': 'Aktionen',
        'common.cancel': 'Abbrechen',
        'common.confirm': 'Bestätigen',
        'common.email': 'E-Mail',
        'common.first_name': 'Vorname',
        'common.last_login': 'Letzter Login',
        'common.last_name': 'Nachname',
        'common.loading': 'Lädt...',
        'common.never': 'Nie',
        'common.no': 'Nein',
        'common.not_specified': 'Nicht angegeben',
        'common.of': 'von',
        'common.position': 'Position',
        'common.short_description': 'Kurzbeschreibung',
        'common.show': 'Anzeigen',
        'common.yes': 'Ja',
        'company.add': 'Unternehmen hinzufügen',
        'company.edit': 'Unternehmen bearbeiten',
        'date.singular': 'Datum',
        'edit': 'Bearbeiten',
        'event.add': 'Veranstaltung hinzufügen',
        'event.date': 'Veranstaltungsdatum',
        'event.edit': 'Veranstaltung bearbeiten',
        'event.end_time': 'Endzeit',
        'event.location': 'Veranstaltungsort',
        'event.max_capacity': 'Maximale Kapazität',
        'event.room': 'Raum',
        'event.schedule': 'Zeitplan',
        'event.schedules': 'Zeitpläne',
        'event.short_description': 'Kurzbeschreibung',
        'event.start_time': 'Startzeit',
        'event.title': 'Veranstaltungstitel',
        'event.type': 'Veranstaltungstyp',
        'file.validation.invalid_type': 'Ungültiger Dateityp',
        'file.validation.max_files': 'Maximale Anzahl an Dateien überschritten',
        'file.validation.max_size': 'Dateigröße überschreitet das erlaubte Maximum',
        'file_uploader.click_to_upload': 'Klicken zum Hochladen',
        'file_uploader.or_drag_drop': 'oder Dateien hierher ziehen',
        'file_uploader.upload_failed': 'Upload fehlgeschlagen',
        'file_uploader.uploading': 'Wird hochgeladen...',
        'form.description': 'Beschreibung',
        'global.close': 'Schließen',
        'global.common.confirm_bulk_delete_title': 'Massenlöschung bestätigen',
        'global.common.confirm_delete_title': 'Löschen bestätigen',
        'global.common.delete_confirmation': 'Möchten Sie dieses Element wirklich löschen?',
        'global.common.more': 'Mehr',
        'global.common.no_companies': 'Keine Unternehmen',
        'global.confirm': 'Bestätigen',
        'global.dashboard': 'Dashboard',
        'global.deleted_items': 'Gelöschte Elemente',
        'global.error': 'Fehler',
        'global.goodbye': 'Auf Wiedersehen',
        'global.less': 'Weniger',
        'global.loading': 'Lädt',
        'global.management': 'Verwaltung',
        'global.master_data': 'Stammdaten',
        'global.message': 'Nachricht',
        'global.messages.error': 'Fehler',
        'global.messages.something_went_wrong': 'Etwas ist schief gelaufen. Bitte versuchen Sie es erneut.',
        'global.more': 'Mehr',
        'global.name': 'Name',
        'global.next': 'Weiter',
        'global.no_records_found': 'Keine Datensätze gefunden',
        'global.no_search_results': 'Keine Suchergebnisse gefunden für',
        'global.overview': 'Übersicht',
        'global.previous': 'Zurück',
        'global.sidebar.delete_project': 'Projekt löschen',
        'global.sidebar.my_account': 'Mein Konto',
        'global.sidebar.my_tasks': 'Meine Aufgaben',
        'global.sidebar.projects': 'Projekte',
        'global.sidebar.settings': 'Einstellungen',
        'global.slug': 'Slug',
        'global.welcome': 'Willkommen zurück',
        'group.add': 'Gruppe hinzufügen',
        'group.edit': 'Gruppe bearbeiten',
        'group.select': 'Gruppe auswählen',
        'it_support.plural': 'IT-Support',
        'it_support.singular': 'IT-Support',
        'language.description': 'Wählen Sie Ihre bevorzugte Sprache für die Anwendung',
        'language.plural': 'Sprachen',
        'language.singular': 'Sprache',
        'location.plural': 'Standorte',
        'location.singular': 'Standort',
        'media.access_academy': 'Akademie',
        'media.access_level': 'Zugriffsstufe',
        'media.access_public': 'Öffentlich',
        'media.access_self': 'Nur selbst',
        'media.access_support': 'Support-Team',
        'media.add_metadata': 'Metadaten hinzufügen',
        'media.add_metadata_description': 'Metadateninformationen für Ihre Mediendatei hinzufügen',
        'media.alt_text': 'Alt-Text',
        'media.alt_text_placeholder': 'Alternativen Text für Barrierefreiheit eingeben',
        'media.allowed_types': 'Erlaubte Typen',
        'media.current': 'Aktuell',
        'media.description': 'Beschreibung',
        'media.description_placeholder': 'Geben Sie eine Beschreibung für diese Mediendatei ein',
        'media.drag_drop_or_click': 'Dateien hierher ziehen oder klicken zum Auswählen',
        'media.edit_metadata': 'Metadaten bearbeiten',
        'media.edit_metadata_description': 'Metadateninformationen für Ihre Mediendatei bearbeiten',
        'media.gallery_description': 'Dateien aus Ihrer Medienbibliothek auswählen',
        'media.gallery_title': 'Medien-Galerie',
        'media.load_error': 'Medien konnten nicht geladen werden',
        'media.max_files': 'Max. Dateien',
        'media.max_size': 'Max. Größe',
        'media.no_files_found': 'Keine Dateien gefunden',
        'media.open_gallery': 'Galerie öffnen',
        'media.remove': 'Entfernen',
        'media.replace': 'Ersetzen',
        'media.search_placeholder': 'Mediendateien suchen...',
        'media.select_files': 'Dateien auswählen',
        'media.selected': 'ausgewählt',
        'media.selected_files': 'Ausgewählte Dateien',
        'media.title': 'Titel',
        'media.title_placeholder': 'Geben Sie einen Titel für diese Mediendatei ein',
        'media.upload_error': 'Upload fehlgeschlagen',
        'media.upload_prompt': 'Klicken zum Hochladen oder Dateien hierher ziehen',
        'media.uploading': 'Wird hochgeladen...',
        'media.validation.globally_denied': 'Dateityp \'{type}\' ist aus Sicherheitsgründen nicht erlaubt',
        'media.validation.size_exceeded': 'Dateigröße ({size}MB) überschreitet die maximal erlaubte Größe ({max}MB)',
        'media.validation.svg_superadmin_only': 'SVG-Dateien können nur von Super-Administratoren hochgeladen werden',
        'media.validation.too_many_files': 'Zu viele Dateien ({count}). Maximum erlaubt: {max}',
        'media.validation.type_denied': 'Dateityp \'{type}\' ist aus Sicherheitsgründen nicht erlaubt',
        'media.validation.type_not_allowed': 'Dateityp \'{type}\' ist nicht erlaubt. Erlaubte Typen: {allowed}',
        'note.placeholder': 'Notiz eingeben...',
        'note.singular': 'Notiz',
        'occupation.add': 'Beruf hinzufügen',
        'occupation.description': 'Berufe und Stellenrollen verwalten',
        'occupation.edit': 'Beruf bearbeiten',
        'occupation.name': 'Berufsbezeichnung',
        'occupation.name_placeholder': 'Berufsbezeichnung eingeben',
        'occupation.plural': 'Berufe',
        'occupation.select': 'Beruf auswählen',
        'occupation.singular': 'Beruf',
        'partner.location': 'Partnerstandort',
        'partner.plural': 'Partner',
        'partner.register': 'Partnerregister',
        'partner.singular': 'Partner',
        'permission.plural': 'Berechtigungen',
        'permission.singular': 'Berechtigung',
        'position.placeholder': 'Position eingeben',
        'position.plural': 'Positionen',
        'position.singular': 'Position',
        'postal_code.placeholder': 'Postleitzahl eingeben',
        'postal_code.singular': 'Postleitzahl',
        'preference.description': 'Ihre Anwendungseinstellungen verwalten',
        'preference.plural': 'Einstellungen',
        'preference.singular': 'Einstellung',
        'profile.description': 'Ihre persönlichen Informationen und Kontoeinstellungen verwalten',
        'profile.singular': 'Profil',
        'profile.update_failed': 'Profil-Aktualisierung fehlgeschlagen',
        'profile.update_success': 'Profil erfolgreich aktualisiert',
        'requester.cell': 'Antragsteller Handy',
        'requester.email': 'Antragsteller E-Mail',
        'requester.information': 'Antragsteller Informationen',
        'requester.name': 'Antragsteller Name',
        'requester.phone': 'Antragsteller Telefon',
        'requester.plural': 'Antragsteller',
        'requester.singular': 'Antragsteller',
        'role.no_permission': 'Keine Berechtigung',
        'role.plural': 'Rollen',
        'role.singular': 'Rolle',
        'role.singular_placeholder': 'Rolle auswählen',
        'setting.plural': 'Einstellungen',
        'setting.singular': 'Einstellung',
        'speaker.add_description': 'Einen neuen Referenten zum Akademie-System hinzufügen',
        'speaker.description': 'Verwalten Sie Referenten für Veranstaltungen und Workshops',
        'speaker.edit_description': 'Referenteninformationen und Qualifikationen bearbeiten',
        'speaker.name': 'Referentenname',
        'speaker.name_placeholder': 'Referentenname eingeben',
        'speaker.plural': 'Referenten',
        'speaker.qualification': 'Qualifikation',
        'speaker.qualification_help': 'Optional: Beschreiben Sie die Expertise und Qualifikationen des Referenten',
        'speaker.qualification_placeholder': 'Qualifikation eingeben (z.B. PhD in Informatik)',
        'speaker.singular': 'Referent',
        'street.placeholder': 'Straßennamen eingeben',
        'street.singular': 'Straße',
        'street_number.placeholder': 'Hausnummer eingeben',
        'street_number.singular': 'Hausnummer',
        'task.plural': 'Aufgaben',
        'task.singular': 'Aufgabe',
        'theme.description': 'Wählen Sie Ihr bevorzugtes Farbschema für die Anwendung',
        'theme.plural': 'Designs',
        'theme.singular': 'Design',
        'ticket.details': 'Ticket-Details',
        'ticket.plural': 'Tickets',
        'ticket.singular': 'Ticket',
        'type.plural': 'Typen',
        'type.singular': 'Typ',
        'user.account': 'Konto',
        'user.add_description': 'Neuen Benutzer zum System hinzufügen',
        'user.edit_description': 'Benutzerinformationen und Berechtigungen bearbeiten',
        'user.first_name': 'Vorname',
        'user.first_name_placeholder': 'Vorname eingeben',
        'user.is_super_admin': 'Super-Administrator',
        'user.last_name': 'Nachname',
        'user.last_name_placeholder': 'Nachname eingeben',
        'user.not_super_admin': 'Regulärer Benutzer',
        'user.password_placeholder': 'Passwort eingeben',
        'user.plural': 'Benutzer',
        'user.singular': 'Benutzer',
        'user.super_admin': 'Super-Administrator',
        'user.tasks': 'Aufgaben',
        'user.username': 'Benutzername',
        'user.username_placeholder': 'Benutzername eingeben',
        'validation.code_format': 'darf nur Großbuchstaben, Zahlen und Unterstriche enthalten',
        'validation.employee_fields_required': 'Gruppe und Beruf sind für Mitarbeiter erforderlich',
        'validation.exact_length': 'muss genau {len} Zeichen lang sein',
        'validation.integer': 'muss eine ganze Zahl sein',
        'validation.invalid': 'ist ungültig',
        'validation.max_length': 'darf maximal {max} Zeichen lang sein',
        'validation.min_length': 'muss mindestens {min} Zeichen lang sein',
        'validation.min_value': 'muss mindestens {min} sein',
        'validation.password_strength': 'muss mindestens einen Kleinbuchstaben, einen Großbuchstaben und eine Zahl enthalten',
        'validation.positive': 'muss eine positive Zahl sein',
        'validation.required': 'ist erforderlich',
        'validation.slug_format': 'darf nur Kleinbuchstaben, Zahlen und Bindestriche enthalten',
        'validation.uuid': 'muss eine gültige UUID sein',
    },
};

// Function to set nested value
function setNestedValue(obj, key, value) {
    const parts = key.split('.');
    let current = obj;

    for (let i = 0; i < parts.length - 1; i++) {
        const part = parts[i];
        if (!current[part] || typeof current[part] !== 'object') {
            current[part] = {};
        }
        current = current[part];
    }

    current[parts[parts.length - 1]] = value;
}

// Function to sort object keys recursively
function sortObjectKeys(obj) {
    if (typeof obj !== 'object' || obj === null) {
        return obj;
    }

    const sorted = {};
    Object.keys(obj).sort().forEach((key) => {
        sorted[key] = sortObjectKeys(obj[key]);
    });

    return sorted;
}

// Main execution
console.log('🔄 Adding missing translations...\n');

const localesDir = path.join(__dirname, '..', 'i18n', 'locales');
const enPath = path.join(localesDir, 'en.json');
const dePath = path.join(localesDir, 'de.json');

// Load existing translations
let enTranslations = JSON.parse(fs.readFileSync(enPath, 'utf8'));
let deTranslations = JSON.parse(fs.readFileSync(dePath, 'utf8'));

// Remove invalid empty keys
delete enTranslations[''];
delete enTranslations['DD'];
delete enTranslations['T'];
delete enTranslations['a'];
delete deTranslations[''];
delete deTranslations['DD'];
delete deTranslations['T'];
delete deTranslations['a'];

// Add missing translations
let enAdded = 0;
let deAdded = 0;

for (const [key, value] of Object.entries(missingTranslations.en)) {
    const parts = key.split('.');
    let current = enTranslations;
    let exists = true;

    for (const part of parts) {
        if (!current[part]) {
            exists = false;
            break;
        }
        current = current[part];
    }

    if (!exists || (typeof current === 'string' && current.startsWith('[MISSING:'))) {
        setNestedValue(enTranslations, key, value);
        enAdded++;
    }
}

for (const [key, value] of Object.entries(missingTranslations.de)) {
    const parts = key.split('.');
    let current = deTranslations;
    let exists = true;

    for (const part of parts) {
        if (!current[part]) {
            exists = false;
            break;
        }
        current = current[part];
    }

    if (!exists || (typeof current === 'string' && current.startsWith('[MISSING:'))) {
        setNestedValue(deTranslations, key, value);
        deAdded++;
    }
}

// Sort and write back
enTranslations = sortObjectKeys(enTranslations);
deTranslations = sortObjectKeys(deTranslations);

fs.writeFileSync(enPath, JSON.stringify(enTranslations, null, 2), 'utf8');
fs.writeFileSync(dePath, JSON.stringify(deTranslations, null, 2), 'utf8');

console.log('✅ Translation files updated!');
console.log(`\n📊 Statistics:`);
console.log(`   English translations added: ${enAdded}`);
console.log(`   German translations added: ${deAdded}`);
console.log('\n✨ Done!');
